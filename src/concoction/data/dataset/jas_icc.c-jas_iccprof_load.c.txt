-----label-----
0
-----code-----
jas_iccprof_t *jas_iccprof_load(jas_stream_t *in)
{
	jas_iccprof_t *prof;
	int numtags;
	long curoff;
	long reloff;
	long prevoff;
	jas_iccsig_t type;
	jas_iccattrval_t *attrval;
	jas_iccattrval_t *prevattrval;
	jas_icctagtabent_t *tagtabent;
	jas_iccattrvalinfo_t *attrvalinfo;
	int i;
	int len;

	prof = 0;
	attrval = 0;

	if (!(prof = jas_iccprof_create())) {
		goto error;
	}

	if (jas_iccprof_readhdr(in, &prof->hdr)) {
		jas_eprintf("cannot get header\n");
		goto error;
	}
	if (jas_iccprof_gettagtab(in, &prof->tagtab)) {
		jas_eprintf("cannot get tab table\n");
		goto error;
	}
	jas_iccprof_sorttagtab(&prof->tagtab);

	numtags = prof->tagtab.numents;
	curoff = JAS_ICC_HDRLEN + 4 + 12 * numtags;
	prevoff = 0;
	prevattrval = 0;
	for (i = 0; i < numtags; ++i) {
		tagtabent = &prof->tagtab.ents[i];
		if (tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff)) {
			if (prevattrval) {
				if (!(attrval = jas_iccattrval_clone(prevattrval)))
					goto error;
				if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))
					goto error;
				jas_iccattrval_destroy(attrval);
			} else {
#if 0
				jas_eprintf("warning: skipping unknown tag type\n");
#endif
			}
			continue;
		}
		reloff = tagtabent->off - curoff;
		if (reloff > 0) {
			if (jas_stream_gobble(in, reloff) != reloff)
				goto error;
			curoff += reloff;
		} else if (reloff < 0) {
			/* This should never happen since we read the tagged
			element data in a single pass. */
			abort();
		}
		prevoff = curoff;
		if (jas_iccgetuint32(in, &type)) {
			goto error;
		}
		if (jas_stream_gobble(in, 4) != 4) {
			goto error;
		}
		curoff += 8;
		if (!(attrvalinfo = jas_iccattrvalinfo_lookup(type))) {
#if 0
			jas_eprintf("warning: skipping unknown tag type\n");
#endif
			prevattrval = 0;
			continue;
		}
		if (!(attrval = jas_iccattrval_create(type))) {
			goto error;
		}
		len = tagtabent->len - 8;
		if ((*attrval->ops->input)(attrval, in, len)) {
			goto error;
		}
		curoff += len;
		if (jas_iccprof_setattr(prof, tagtabent->tag, attrval)) {
			goto error;
		}
		prevattrval = attrval; /* This is correct, but slimey. */
		jas_iccattrval_destroy(attrval);
		attrval = 0;
	}

	return prof;

error:
	if (prof)
		jas_iccprof_destroy(prof);
	if (attrval)
		jas_iccattrval_destroy(attrval);
	return 0;
}
-----children-----
1,2
1,3
1,4
2,3
4,5
4,6
4,7
7,8
7,9
8,9
10,11
10,12
13,14
13,15
13,16
13,17
13,18
13,19
13,20
13,21
13,22
13,23
13,24
13,25
13,26
13,27
13,28
13,29
13,30
13,31
13,32
13,33
13,34
13,35
13,36
13,37
13,38
13,39
13,40
14,15
15,16
15,17
16,17
18,19
18,20
21,22
22,23
22,24
24,25
26,27
27,28
27,29
29,30
31,32
32,33
32,34
34,35
36,37
37,38
37,39
39,40
41,42
42,43
42,44
43,44
45,46
47,48
48,49
48,50
49,50
51,52
51,53
54,55
55,56
55,57
56,57
58,59
58,60
61,62
62,63
62,64
63,64
65,66
65,67
68,69
69,70
69,71
70,71
72,73
72,74
75,76
76,77
76,78
78,79
80,81
81,82
81,83
83,84
85,86
86,87
86,88
87,88
90,91
91,92
91,93
92,93
95,96
95,97
96,97
97,98
98,99
98,100
99,100
101,102
102,103
104,105
105,106
107,108
107,109
108,109
108,110
108,111
109,110
111,112
113,114
114,115
114,116
115,116
118,119
118,120
119,120
120,121
120,122
121,122
124,125
126,127
126,128
127,128
127,129
127,130
128,129
130,131
132,133
133,134
133,135
134,135
137,138
137,139
138,139
139,140
139,141
140,141
143,144
145,146
146,147
146,148
147,148
149,150
150,151
150,152
151,152
154,155
155,156
155,157
156,157
158,159
158,160
159,160
159,161
160,161
164,165
165,166
165,167
166,167
168,169
168,170
169,170
169,171
170,171
173,174
173,175
175,176
177,178
178,179
178,180
179,180
182,183
183,184
183,185
184,185
187,188
187,189
187,190
187,191
188,189
189,190
189,191
190,191
193,194
193,195
194,195
196,197
198,199
199,200
201,202
201,203
201,204
201,205
201,206
201,207
201,208
201,209
201,210
201,211
201,212
201,213
201,214
201,215
201,216
201,217
201,218
202,203
203,204
203,205
204,205
206,207
207,208
207,209
208,209
208,210
209,210
209,211
210,211
214,215
216,217
216,218
217,218
217,219
218,219
218,220
219,220
222,223
222,224
222,225
223,224
225,226
227,228
229,230
229,231
230,231
230,232
230,233
231,232
233,234
233,235
233,236
234,235
234,236
235,236
236,237
237,238
237,239
238,239
240,241
240,242
241,242
243,244
245,246
247,248
247,249
248,249
248,250
248,251
248,252
249,250
251,252
253,254
253,255
254,255
257,258
259,260
261,262
262,263
262,264
263,264
265,266
269,270
270,271
270,272
271,272
273,274
273,275
274,275
274,276
275,276
278,279
280,281
280,282
280,283
281,282
281,283
282,283
285,286
285,287
286,287
286,288
287,288
287,289
288,289
288,290
288,291
289,290
291,292
293,294
295,296
297,298
299,300
300,301
300,302
301,302
303,304
305,306
305,307
306,307
306,308
307,308
310,311
311,312
312,313
313,314
315,316
316,317
316,318
317,318
319,320
321,322
321,323
322,323
322,324
322,325
323,324
325,326
327,328
328,329
330,331
331,332
333,334
333,335
334,335
334,336
335,336
335,337
335,338
336,337
338,339
342,343
343,344
345,346
346,347
346,348
347,348
350,351
350,352
351,352
352,353
353,354
353,355
354,355
356,357
356,358
357,358
359,360
361,362
361,363
362,363
363,364
363,365
364,365
368,369
368,370
369,370
370,371
371,372
371,373
372,373
374,375
374,376
375,376
377,378
379,380
380,381
382,383
383,384
383,385
384,385
386,387
386,388
387,388
387,389
388,389
392,393
392,394
393,394
393,395
393,396
393,397
394,395
395,396
396,397
396,398
397,398
397,399
398,399
402,403
404,405
406,407
408,409
409,410
411,412
412,413
412,414
413,414
415,416
417,418
417,419
418,419
418,420
418,421
418,422
419,420
421,422
423,424
423,425
424,425
427,428
429,430
430,431
432,433
433,434
433,435
434,435
436,437
438,439
439,440
439,441
440,441
442,443
444,445
445,446
445,447
446,447
449,450
450,451
452,453
452,454
454,455
454,456
455,456
457,458
458,459
458,460
459,460
461,462
463,464
463,465
464,465
466,467
467,468
467,469
468,469
470,471
472,473
-----nextToken-----
3,5,6,9,11,12,17,19,20,23,25,28,30,33,35,38,40,44,46,50,52,53,57,59,60,64,66,67,71,73,74,77,79,82,84,88,89,93,94,100,103,106,110,112,116,117,122,123,125,129,131,135,136,141,142,144,148,152,153,157,161,162,163,167,171,172,174,176,180,181,185,186,191,192,195,197,200,205,211,212,213,215,220,221,224,226,228,232,239,242,244,246,250,252,255,256,258,260,264,266,267,268,272,276,277,279,283,284,290,292,294,296,298,302,304,308,309,314,318,320,324,326,329,332,337,339,340,341,344,348,349,355,358,360,365,366,367,373,376,378,381,385,389,390,391,399,400,401,403,405,407,410,414,416,420,422,425,426,428,431,435,437,441,443,447,448,451,453,456,460,462,465,469,471,473
-----computeFrom-----
86,87
86,88
91,92
91,93
98,99
98,100
155,156
155,157
165,166
165,167
168,169
168,170
169,170
169,171
173,174
173,175
178,179
178,180
183,184
183,185
189,190
189,191
193,194
193,195
203,204
203,205
217,218
217,219
237,238
237,239
270,271
270,272
273,274
273,275
281,282
281,283
287,288
287,289
300,301
300,302
306,307
306,308
316,317
316,318
334,335
334,336
346,347
346,348
353,354
353,355
363,364
363,365
371,372
371,373
383,384
383,385
386,387
386,388
412,413
412,414
433,434
433,435
445,446
445,447
-----guardedBy-----
220,255
283,304
-----guardedByNegation-----
283,308
-----lastLexicalUse-----
283,308
-----jump-----
283,308
-----attribute-----
FunctionDefinition;NamedTypeSpecifier;Name;FunctionDeclarator;Pointer;Name;ParameterDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;CompoundStatement;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;IfStatement;UnaryExpression;UnaryExpression;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;CompoundStatement;GotoStatement;Name;IfStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;UnaryExpression;FieldReference;IdExpression;Name;Name;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;LiteralExpression;GotoStatement;Name;IfStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;UnaryExpression;FieldReference;IdExpression;Name;Name;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;LiteralExpression;GotoStatement;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;UnaryExpression;FieldReference;IdExpression;Name;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;FieldReference;FieldReference;IdExpression;Name;Name;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;BinaryExpression;BinaryExpression;IdExpression;Name;LiteralExpression;BinaryExpression;LiteralExpression;IdExpression;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;ForStatement;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;BinaryExpression;IdExpression;Name;IdExpression;Name;UnaryExpression;IdExpression;Name;CompoundStatement;ExpressionStatement;BinaryExpression;IdExpression;Name;UnaryExpression;ArraySubscriptExpression;FieldReference;FieldReference;IdExpression;Name;Name;Name;IdExpression;Name;IfStatement;BinaryExpression;FieldReference;IdExpression;Name;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;CompoundStatement;IfStatement;IdExpression;Name;CompoundStatement;IfStatement;UnaryExpression;UnaryExpression;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;GotoStatement;Name;IfStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;FieldReference;IdExpression;Name;Name;IdExpression;Name;GotoStatement;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;CompoundStatement;ContinueStatement;ExpressionStatement;BinaryExpression;IdExpression;Name;BinaryExpression;FieldReference;IdExpression;Name;Name;IdExpression;Name;IfStatement;BinaryExpression;IdExpression;Name;LiteralExpression;CompoundStatement;IfStatement;BinaryExpression;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;IdExpression;Name;GotoStatement;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;IdExpression;Name;IfStatement;BinaryExpression;IdExpression;Name;LiteralExpression;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;IdExpression;Name;IfStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;UnaryExpression;IdExpression;Name;CompoundStatement;GotoStatement;Name;IfStatement;BinaryExpression;FunctionCallExpression;IdExpression;Name;IdExpression;Name;LiteralExpression;LiteralExpression;CompoundStatement;GotoStatement;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;IfStatement;UnaryExpression;UnaryExpression;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;CompoundStatement;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;ContinueStatement;IfStatement;UnaryExpression;UnaryExpression;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;CompoundStatement;GotoStatement;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;BinaryExpression;FieldReference;IdExpression;Name;Name;LiteralExpression;IfStatement;FunctionCallExpression;UnaryExpression;UnaryExpression;FieldReference;FieldReference;IdExpression;Name;Name;Name;IdExpression;Name;IdExpression;Name;IdExpression;Name;CompoundStatement;GotoStatement;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;IdExpression;Name;IfStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;FieldReference;IdExpression;Name;Name;IdExpression;Name;CompoundStatement;GotoStatement;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;ReturnStatement;IdExpression;Name;LabelStatement;Name;IfStatement;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IfStatement;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;ReturnStatement;LiteralExpression;
-----ast_node-----
jas_iccprof_t *jas_iccprof_load(jas_stream_t *in){	jas_iccprof_t *prof;	int numtags;	long curoff;	long reloff;	long prevoff;	jas_iccsig_t type;	jas_iccattrval_t *attrval;	jas_iccattrval_t *prevattrval;	jas_icctagtabent_t *tagtabent;	jas_iccattrvalinfo_t *attrvalinfo;	int i;	int len;	prof = 0;	attrval = 0;	if (!(prof = jas_iccprof_create())) {		goto error;	}	if (jas_iccprof_readhdr(in, &prof->hdr)) {		jas_eprintf("cannot get header\n");		goto error;	}	if (jas_iccprof_gettagtab(in, &prof->tagtab)) {		jas_eprintf("cannot get tab table\n");		goto error;	}	jas_iccprof_sorttagtab(&prof->tagtab);	numtags = prof->tagtab.numents;	curoff = JAS_ICC_HDRLEN + 4 + 12 * numtags;	prevoff = 0;	prevattrval = 0;	for (i = 0; i < numtags; ++i) {		tagtabent = &prof->tagtab.ents[i];		if (tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff)) {			if (prevattrval) {				if (!(attrval = jas_iccattrval_clone(prevattrval)))					goto error;				if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))					goto error;				jas_iccattrval_destroy(attrval);			} else {#if 0				jas_eprintf("warning: skipping unknown tag type\n");#endif			}			continue;		}		reloff = tagtabent->off - curoff;		if (reloff > 0) {			if (jas_stream_gobble(in, reloff) != reloff)				goto error;			curoff += reloff;		} else if (reloff < 0) {			/* This should never happen since we read the tagged			element data in a single pass. */			abort();		}		prevoff = curoff;		if (jas_iccgetuint32(in, &type)) {			goto error;		}		if (jas_stream_gobble(in, 4) != 4) {			goto error;		}		curoff += 8;		if (!(attrvalinfo = jas_iccattrvalinfo_lookup(type))) {#if 0			jas_eprintf("warning: skipping unknown tag type\n");#endif			prevattrval = 0;			continue;		}		if (!(attrval = jas_iccattrval_create(type))) {			goto error;		}		len = tagtabent->len - 8;		if ((*attrval->ops->input)(attrval, in, len)) {			goto error;		}		curoff += len;		if (jas_iccprof_setattr(prof, tagtabent->tag, attrval)) {			goto error;		}		prevattrval = attrval; /* This is correct, but slimey. */		jas_iccattrval_destroy(attrval);		attrval = 0;	}	return prof;error:	if (prof)		jas_iccprof_destroy(prof);	if (attrval)		jas_iccattrval_destroy(attrval);	return 0;}
jas_iccprof_t
jas_iccprof_t
*jas_iccprof_load(jas_stream_t *in)
*
jas_iccprof_load
jas_stream_t *in
jas_stream_t
jas_stream_t
*in
*
in
{	jas_iccprof_t *prof;	int numtags;	long curoff;	long reloff;	long prevoff;	jas_iccsig_t type;	jas_iccattrval_t *attrval;	jas_iccattrval_t *prevattrval;	jas_icctagtabent_t *tagtabent;	jas_iccattrvalinfo_t *attrvalinfo;	int i;	int len;	prof = 0;	attrval = 0;	if (!(prof = jas_iccprof_create())) {		goto error;	}	if (jas_iccprof_readhdr(in, &prof->hdr)) {		jas_eprintf("cannot get header\n");		goto error;	}	if (jas_iccprof_gettagtab(in, &prof->tagtab)) {		jas_eprintf("cannot get tab table\n");		goto error;	}	jas_iccprof_sorttagtab(&prof->tagtab);	numtags = prof->tagtab.numents;	curoff = JAS_ICC_HDRLEN + 4 + 12 * numtags;	prevoff = 0;	prevattrval = 0;	for (i = 0; i < numtags; ++i) {		tagtabent = &prof->tagtab.ents[i];		if (tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff)) {			if (prevattrval) {				if (!(attrval = jas_iccattrval_clone(prevattrval)))					goto error;				if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))					goto error;				jas_iccattrval_destroy(attrval);			} else {#if 0				jas_eprintf("warning: skipping unknown tag type\n");#endif			}			continue;		}		reloff = tagtabent->off - curoff;		if (reloff > 0) {			if (jas_stream_gobble(in, reloff) != reloff)				goto error;			curoff += reloff;		} else if (reloff < 0) {			/* This should never happen since we read the tagged			element data in a single pass. */			abort();		}		prevoff = curoff;		if (jas_iccgetuint32(in, &type)) {			goto error;		}		if (jas_stream_gobble(in, 4) != 4) {			goto error;		}		curoff += 8;		if (!(attrvalinfo = jas_iccattrvalinfo_lookup(type))) {#if 0			jas_eprintf("warning: skipping unknown tag type\n");#endif			prevattrval = 0;			continue;		}		if (!(attrval = jas_iccattrval_create(type))) {			goto error;		}		len = tagtabent->len - 8;		if ((*attrval->ops->input)(attrval, in, len)) {			goto error;		}		curoff += len;		if (jas_iccprof_setattr(prof, tagtabent->tag, attrval)) {			goto error;		}		prevattrval = attrval; /* This is correct, but slimey. */		jas_iccattrval_destroy(attrval);		attrval = 0;	}	return prof;error:	if (prof)		jas_iccprof_destroy(prof);	if (attrval)		jas_iccattrval_destroy(attrval);	return 0;}
jas_iccprof_t *prof;
jas_iccprof_t *prof;
jas_iccprof_t
jas_iccprof_t
*prof
*
prof
int numtags;
int numtags;
int
numtags
numtags
long curoff;
long curoff;
long
curoff
curoff
long reloff;
long reloff;
long
reloff
reloff
long prevoff;
long prevoff;
long
prevoff
prevoff
jas_iccsig_t type;
jas_iccsig_t type;
jas_iccsig_t
jas_iccsig_t
type
type
jas_iccattrval_t *attrval;
jas_iccattrval_t *attrval;
jas_iccattrval_t
jas_iccattrval_t
*attrval
*
attrval
jas_iccattrval_t *prevattrval;
jas_iccattrval_t *prevattrval;
jas_iccattrval_t
jas_iccattrval_t
*prevattrval
*
prevattrval
jas_icctagtabent_t *tagtabent;
jas_icctagtabent_t *tagtabent;
jas_icctagtabent_t
jas_icctagtabent_t
*tagtabent
*
tagtabent
jas_iccattrvalinfo_t *attrvalinfo;
jas_iccattrvalinfo_t *attrvalinfo;
jas_iccattrvalinfo_t
jas_iccattrvalinfo_t
*attrvalinfo
*
attrvalinfo
int i;
int i;
int
i
i
int len;
int len;
int
len
len
prof = 0;
prof = 0
prof
prof
0
attrval = 0;
attrval = 0
attrval
attrval
0
if (!(prof = jas_iccprof_create())) {		goto error;	}
!(prof = jas_iccprof_create())
(prof = jas_iccprof_create())
prof = jas_iccprof_create()
prof
prof
jas_iccprof_create()
jas_iccprof_create
jas_iccprof_create
{		goto error;	}
goto error;
error
if (jas_iccprof_readhdr(in, &prof->hdr)) {		jas_eprintf("cannot get header\n");		goto error;	}
jas_iccprof_readhdr(in, &prof->hdr)
jas_iccprof_readhdr
jas_iccprof_readhdr
in
in
&prof->hdr
prof->hdr
prof
prof
hdr
{		jas_eprintf("cannot get header\n");		goto error;	}
jas_eprintf("cannot get header\n");
jas_eprintf("cannot get header\n")
jas_eprintf
jas_eprintf
"cannot get header\n"
goto error;
error
if (jas_iccprof_gettagtab(in, &prof->tagtab)) {		jas_eprintf("cannot get tab table\n");		goto error;	}
jas_iccprof_gettagtab(in, &prof->tagtab)
jas_iccprof_gettagtab
jas_iccprof_gettagtab
in
in
&prof->tagtab
prof->tagtab
prof
prof
tagtab
{		jas_eprintf("cannot get tab table\n");		goto error;	}
jas_eprintf("cannot get tab table\n");
jas_eprintf("cannot get tab table\n")
jas_eprintf
jas_eprintf
"cannot get tab table\n"
goto error;
error
jas_iccprof_sorttagtab(&prof->tagtab);
jas_iccprof_sorttagtab(&prof->tagtab)
jas_iccprof_sorttagtab
jas_iccprof_sorttagtab
&prof->tagtab
prof->tagtab
prof
prof
tagtab
numtags = prof->tagtab.numents;
numtags = prof->tagtab.numents
numtags
numtags
prof->tagtab.numents
prof->tagtab
prof
prof
tagtab
numents
curoff = JAS_ICC_HDRLEN + 4 + 12 * numtags;
curoff = JAS_ICC_HDRLEN + 4 + 12 * numtags
curoff
curoff
JAS_ICC_HDRLEN + 4 + 12 * numtags
JAS_ICC_HDRLEN + 4
JAS_ICC_HDRLEN
JAS_ICC_HDRLEN
4
12 * numtags
12
numtags
numtags
prevoff = 0;
prevoff = 0
prevoff
prevoff
0
prevattrval = 0;
prevattrval = 0
prevattrval
prevattrval
0
for (i = 0; i < numtags; ++i) {		tagtabent = &prof->tagtab.ents[i];		if (tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff)) {			if (prevattrval) {				if (!(attrval = jas_iccattrval_clone(prevattrval)))					goto error;				if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))					goto error;				jas_iccattrval_destroy(attrval);			} else {#if 0				jas_eprintf("warning: skipping unknown tag type\n");#endif			}			continue;		}		reloff = tagtabent->off - curoff;		if (reloff > 0) {			if (jas_stream_gobble(in, reloff) != reloff)				goto error;			curoff += reloff;		} else if (reloff < 0) {			/* This should never happen since we read the tagged			element data in a single pass. */			abort();		}		prevoff = curoff;		if (jas_iccgetuint32(in, &type)) {			goto error;		}		if (jas_stream_gobble(in, 4) != 4) {			goto error;		}		curoff += 8;		if (!(attrvalinfo = jas_iccattrvalinfo_lookup(type))) {#if 0			jas_eprintf("warning: skipping unknown tag type\n");#endif			prevattrval = 0;			continue;		}		if (!(attrval = jas_iccattrval_create(type))) {			goto error;		}		len = tagtabent->len - 8;		if ((*attrval->ops->input)(attrval, in, len)) {			goto error;		}		curoff += len;		if (jas_iccprof_setattr(prof, tagtabent->tag, attrval)) {			goto error;		}		prevattrval = attrval; /* This is correct, but slimey. */		jas_iccattrval_destroy(attrval);		attrval = 0;	}
i = 0;
i = 0
i
i
0
i < numtags
i
i
numtags
numtags
++i
i
i
{		tagtabent = &prof->tagtab.ents[i];		if (tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff)) {			if (prevattrval) {				if (!(attrval = jas_iccattrval_clone(prevattrval)))					goto error;				if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))					goto error;				jas_iccattrval_destroy(attrval);			} else {#if 0				jas_eprintf("warning: skipping unknown tag type\n");#endif			}			continue;		}		reloff = tagtabent->off - curoff;		if (reloff > 0) {			if (jas_stream_gobble(in, reloff) != reloff)				goto error;			curoff += reloff;		} else if (reloff < 0) {			/* This should never happen since we read the tagged			element data in a single pass. */			abort();		}		prevoff = curoff;		if (jas_iccgetuint32(in, &type)) {			goto error;		}		if (jas_stream_gobble(in, 4) != 4) {			goto error;		}		curoff += 8;		if (!(attrvalinfo = jas_iccattrvalinfo_lookup(type))) {#if 0			jas_eprintf("warning: skipping unknown tag type\n");#endif			prevattrval = 0;			continue;		}		if (!(attrval = jas_iccattrval_create(type))) {			goto error;		}		len = tagtabent->len - 8;		if ((*attrval->ops->input)(attrval, in, len)) {			goto error;		}		curoff += len;		if (jas_iccprof_setattr(prof, tagtabent->tag, attrval)) {			goto error;		}		prevattrval = attrval; /* This is correct, but slimey. */		jas_iccattrval_destroy(attrval);		attrval = 0;	}
tagtabent = &prof->tagtab.ents[i];
tagtabent = &prof->tagtab.ents[i]
tagtabent
tagtabent
&prof->tagtab.ents[i]
prof->tagtab.ents[i]
prof->tagtab.ents
prof->tagtab
prof
prof
tagtab
ents
i
i
if (tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff)) {			if (prevattrval) {				if (!(attrval = jas_iccattrval_clone(prevattrval)))					goto error;				if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))					goto error;				jas_iccattrval_destroy(attrval);			} else {#if 0				jas_eprintf("warning: skipping unknown tag type\n");#endif			}			continue;		}
tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff)
tagtabent->off
tagtabent
tagtabent
off
JAS_CAST(jas_iccuint32_t, prevoff)
JAS_CAST
JAS_CAST
jas_iccuint32_t
jas_iccuint32_t
prevoff
prevoff
{			if (prevattrval) {				if (!(attrval = jas_iccattrval_clone(prevattrval)))					goto error;				if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))					goto error;				jas_iccattrval_destroy(attrval);			} else {#if 0				jas_eprintf("warning: skipping unknown tag type\n");#endif			}			continue;		}
if (prevattrval) {				if (!(attrval = jas_iccattrval_clone(prevattrval)))					goto error;				if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))					goto error;				jas_iccattrval_destroy(attrval);			} else {#if 0				jas_eprintf("warning: skipping unknown tag type\n");#endif			}
prevattrval
prevattrval
{				if (!(attrval = jas_iccattrval_clone(prevattrval)))					goto error;				if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))					goto error;				jas_iccattrval_destroy(attrval);			}
if (!(attrval = jas_iccattrval_clone(prevattrval)))					goto error;
!(attrval = jas_iccattrval_clone(prevattrval))
(attrval = jas_iccattrval_clone(prevattrval))
attrval = jas_iccattrval_clone(prevattrval)
attrval
attrval
jas_iccattrval_clone(prevattrval)
jas_iccattrval_clone
jas_iccattrval_clone
prevattrval
prevattrval
goto error;
error
if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))					goto error;
jas_iccprof_setattr(prof, tagtabent->tag, attrval)
jas_iccprof_setattr
jas_iccprof_setattr
prof
prof
tagtabent->tag
tagtabent
tagtabent
tag
attrval
attrval
goto error;
error
jas_iccattrval_destroy(attrval);
jas_iccattrval_destroy(attrval)
jas_iccattrval_destroy
jas_iccattrval_destroy
attrval
attrval
{#if 0				jas_eprintf("warning: skipping unknown tag type\n");#endif			}
continue;
reloff = tagtabent->off - curoff;
reloff = tagtabent->off - curoff
reloff
reloff
tagtabent->off - curoff
tagtabent->off
tagtabent
tagtabent
off
curoff
curoff
if (reloff > 0) {			if (jas_stream_gobble(in, reloff) != reloff)				goto error;			curoff += reloff;		} else if (reloff < 0) {			/* This should never happen since we read the tagged			element data in a single pass. */			abort();		}
reloff > 0
reloff
reloff
0
{			if (jas_stream_gobble(in, reloff) != reloff)				goto error;			curoff += reloff;		}
if (jas_stream_gobble(in, reloff) != reloff)				goto error;
jas_stream_gobble(in, reloff) != reloff
jas_stream_gobble(in, reloff)
jas_stream_gobble
jas_stream_gobble
in
in
reloff
reloff
reloff
reloff
goto error;
error
curoff += reloff;
curoff += reloff
curoff
curoff
reloff
reloff
if (reloff < 0) {			/* This should never happen since we read the tagged			element data in a single pass. */			abort();		}
reloff < 0
reloff
reloff
0
{			/* This should never happen since we read the tagged			element data in a single pass. */			abort();		}
abort();
abort()
abort
abort
prevoff = curoff;
prevoff = curoff
prevoff
prevoff
curoff
curoff
if (jas_iccgetuint32(in, &type)) {			goto error;		}
jas_iccgetuint32(in, &type)
jas_iccgetuint32
jas_iccgetuint32
in
in
&type
type
type
{			goto error;		}
goto error;
error
if (jas_stream_gobble(in, 4) != 4) {			goto error;		}
jas_stream_gobble(in, 4) != 4
jas_stream_gobble(in, 4)
jas_stream_gobble
jas_stream_gobble
in
in
4
4
{			goto error;		}
goto error;
error
curoff += 8;
curoff += 8
curoff
curoff
8
if (!(attrvalinfo = jas_iccattrvalinfo_lookup(type))) {#if 0			jas_eprintf("warning: skipping unknown tag type\n");#endif			prevattrval = 0;			continue;		}
!(attrvalinfo = jas_iccattrvalinfo_lookup(type))
(attrvalinfo = jas_iccattrvalinfo_lookup(type))
attrvalinfo = jas_iccattrvalinfo_lookup(type)
attrvalinfo
attrvalinfo
jas_iccattrvalinfo_lookup(type)
jas_iccattrvalinfo_lookup
jas_iccattrvalinfo_lookup
type
type
{#if 0			jas_eprintf("warning: skipping unknown tag type\n");#endif			prevattrval = 0;			continue;		}
prevattrval = 0;
prevattrval = 0
prevattrval
prevattrval
0
continue;
if (!(attrval = jas_iccattrval_create(type))) {			goto error;		}
!(attrval = jas_iccattrval_create(type))
(attrval = jas_iccattrval_create(type))
attrval = jas_iccattrval_create(type)
attrval
attrval
jas_iccattrval_create(type)
jas_iccattrval_create
jas_iccattrval_create
type
type
{			goto error;		}
goto error;
error
len = tagtabent->len - 8;
len = tagtabent->len - 8
len
len
tagtabent->len - 8
tagtabent->len
tagtabent
tagtabent
len
8
if ((*attrval->ops->input)(attrval, in, len)) {			goto error;		}
(*attrval->ops->input)(attrval, in, len)
(*attrval->ops->input)
*attrval->ops->input
attrval->ops->input
attrval->ops
attrval
attrval
ops
input
attrval
attrval
in
in
len
len
{			goto error;		}
goto error;
error
curoff += len;
curoff += len
curoff
curoff
len
len
if (jas_iccprof_setattr(prof, tagtabent->tag, attrval)) {			goto error;		}
jas_iccprof_setattr(prof, tagtabent->tag, attrval)
jas_iccprof_setattr
jas_iccprof_setattr
prof
prof
tagtabent->tag
tagtabent
tagtabent
tag
attrval
attrval
{			goto error;		}
goto error;
error
prevattrval = attrval;
prevattrval = attrval
prevattrval
prevattrval
attrval
attrval
jas_iccattrval_destroy(attrval);
jas_iccattrval_destroy(attrval)
jas_iccattrval_destroy
jas_iccattrval_destroy
attrval
attrval
attrval = 0;
attrval = 0
attrval
attrval
0
return prof;
prof
prof
error:	if (prof)		jas_iccprof_destroy(prof);
error
if (prof)		jas_iccprof_destroy(prof);
prof
prof
jas_iccprof_destroy(prof);
jas_iccprof_destroy(prof)
jas_iccprof_destroy
jas_iccprof_destroy
prof
prof
if (attrval)		jas_iccattrval_destroy(attrval);
attrval
attrval
jas_iccattrval_destroy(attrval);
jas_iccattrval_destroy(attrval)
jas_iccattrval_destroy
jas_iccattrval_destroy
attrval
attrval
return 0;
0
-----joern-----
(4,40,0)
(39,28,0)
(47,3,0)
(36,29,0)
(17,47,0)
(35,23,0)
(26,28,0)
(40,22,0)
(43,40,0)
(31,15,0)
(19,28,0)
(22,28,0)
(46,29,0)
(38,28,0)
(33,21,0)
(1,39,0)
(23,38,0)
(45,47,0)
(42,47,0)
(24,12,0)
(1,17,0)
(21,33,0)
(47,45,0)
(25,12,0)
(9,42,0)
(11,28,0)
(16,23,0)
(41,12,0)
(42,31,0)
(39,1,0)
(14,39,0)
(12,47,0)
(10,19,0)
(13,28,0)
(6,19,0)
(27,7,0)
(36,38,0)
(2,48,0)
(29,21,0)
(48,21,0)
(17,1,0)
(49,42,0)
(5,28,0)
(21,48,0)
(22,40,0)
(29,36,0)
(40,47,0)
(31,28,0)
(20,21,0)
(23,47,0)
(12,25,0)
(19,47,0)
(37,17,0)
(0,17,0)
(8,28,0)
(32,29,0)
(38,36,0)
(39,25,0)
(18,31,0)
(7,28,0)
(48,15,0)
(25,39,0)
(30,47,0)
(3,47,0)
(6,7,0)
(27,44,1)
(47,45,1)
(25,12,1)
(16,35,1)
(22,40,1)
(33,21,1)
(19,10,1)
(6,7,1)
(38,36,1)
(6,19,1)
(32,46,1)
(12,47,1)
(48,2,1)
(7,27,1)
(39,25,1)
(14,1,1)
(21,48,1)
(31,15,1)
(3,47,1)
(23,16,1)
(45,30,1)
(40,47,1)
(17,47,1)
(35,3,1)
(17,0,1)
(18,42,1)
(2,20,1)
(40,43,1)
(44,33,1)
(23,47,1)
(48,15,1)
(42,9,1)
(29,32,1)
(37,22,1)
(34,3,1)
(24,41,1)
(0,37,1)
(1,17,1)
(12,24,1)
(4,31,1)
(49,38,1)
(9,49,1)
(27,34,1)
(30,33,1)
(29,21,1)
(39,1,1)
(41,14,1)
(43,4,1)
(31,18,1)
(36,29,1)
(42,47,1)
(46,23,1)
(10,39,1)
(19,47,1)
(6,19,2)
(41,3,2)
(36,29,2)
(18,3,2)
(1,17,2)
(27,3,2)
(39,1,2)
(31,15,2)
(22,3,2)
(47,33,2)
(45,33,2)
(3,47,2)
(4,3,2)
(22,40,2)
(32,3,2)
(25,12,2)
(17,47,2)
(47,45,2)
(42,47,2)
(23,3,2)
(38,36,2)
(27,33,2)
(29,3,2)
(40,47,2)
(36,3,2)
(23,47,2)
(9,3,2)
(39,25,2)
(7,33,2)
(21,48,2)
(12,47,2)
(38,3,2)
(31,3,2)
(48,15,2)
(3,33,2)
(30,33,2)
(40,3,2)
(37,3,2)
(10,3,2)
(24,3,2)
(19,3,2)
(0,3,2)
(1,3,2)
(33,21,2)
(44,33,2)
(49,3,2)
(43,3,2)
(35,3,2)
(14,3,2)
(42,3,2)
(46,3,2)
(12,3,2)
(39,3,2)
(6,7,2)
(17,3,2)
(34,3,2)
(7,3,2)
(29,21,2)
(16,3,2)
(25,3,2)
(19,47,2)
-----------------------------------
(0,data)
(1,&attrval->data)
(2,type)
(3,!(attrval = jas_iccattrval_create0()
(4,attrval)
(5,error:)
(6,RET)
(7,return 0;)
(8,attrval)
(9,type)
(10,attrval)
(11,if (!(attrval = jas_iccattrval_create0()
(12,attrval->data)
(13,info)
(14,0)
(15,jas_iccuint32_t type)
(16,ops)
(17,attrval->data)
(18,type)
(19,return attrval;)
(20,info)
(21,info = jas_iccattrvalinfo_lookup(type)
(22,++attrval->refcnt)
(23,attrval->ops)
(24,data)
(25,sizeof(attrval->data)
(26,if (!(info = jas_iccattrvalinfo_lookup(type)
(27,0)
(28,)
(29,info->ops)
(30,attrval)
(31,attrval->type = type)
(32,ops)
(33,!(info = jas_iccattrvalinfo_lookup(type)
(34,goto error;)
(35,attrval)
(36,&info->ops)
(37,attrval)
(38,attrval->ops = &info->ops)
(39,memset(&attrval->data, 0, sizeof(attrval->data)
(40,attrval->refcnt)
(41,attrval)
(42,attrval->type)
(43,refcnt)
(44,goto error;)
(45,jas_iccattrval_create0()
(46,info)
(47,attrval = jas_iccattrval_create0()
(48,jas_iccattrvalinfo_lookup(type)
(49,attrval)
-----cfg-----
(256,261)
(256,263)
(261,263)
(263,265)
(7,22)
(22,25)
(25,32)
(29,256)
(29,261)
(29,263)
(29,41)
(30,29)
(32,30)
(36,43)
(36,52)
(38,36)
(39,38)
(41,39)
(43,256)
(43,261)
(43,263)
(47,54)
(47,61)
(49,47)
(50,49)
(52,50)
(54,256)
(54,261)
(54,263)
(57,67)
(58,57)
(59,58)
(61,59)
(62,72)
(64,62)
(65,68)
(67,65)
(68,64)
(69,78)
(71,69)
(72,75)
(75,71)
(78,81)
(81,86)
(86,89)
(89,102)
(89,250)
(92,89)
(95,109)
(97,95)
(98,97)
(99,98)
(100,103)
(102,100)
(103,99)
(106,121)
(106,92)
(106,144)
(107,110)
(109,107)
(110,106)
(118,256)
(118,261)
(118,263)
(118,130)
(119,118)
(121,119)
(126,256)
(126,261)
(126,263)
(126,134)
(128,126)
(130,128)
(134,92)
(139,147)
(141,139)
(142,141)
(144,142)
(147,153)
(147,165)
(152,256)
(152,261)
(152,263)
(152,159)
(153,152)
(159,170)
(165,169)
(165,170)
(169,170)
(170,176)
(174,256)
(174,261)
(174,263)
(174,182)
(176,174)
(181,256)
(181,261)
(181,263)
(181,188)
(182,181)
(188,195)
(192,198)
(192,206)
(193,192)
(195,193)
(198,92)
(203,256)
(203,261)
(203,263)
(203,215)
(204,203)
(206,204)
(210,223)
(212,210)
(213,212)
(215,213)
(218,256)
(218,261)
(218,263)
(218,230)
(219,218)
(220,219)
(221,224)
(223,221)
(224,220)
(230,238)
(234,256)
(234,261)
(234,263)
(234,242)
(236,234)
(238,236)
(242,245)
(245,247)
(247,92)
(250,265)
-----path-----
7,22,25,32,30,29,256,261,263,265
7,22,25,32,30,29,256,263,265
7,22,25,32,30,29,261,263,265
7,22,25,32,30,29,263,265
7,22,25,32,30,29,41,39,38,36,43,256,261,263,265
7,22,25,32,30,29,41,39,38,36,43,256,263,265
7,22,25,32,30,29,41,39,38,36,43,261,263,265
7,22,25,32,30,29,41,39,38,36,43,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,54,256,261,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,54,256,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,54,261,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,54,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,121,119,118,256,261,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,121,119,118,256,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,121,119,118,261,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,121,119,118,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,121,119,118,130,128,126,256,261,263
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,121,119,118,130,128,126,256,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,121,119,118,130,128,126,261,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,121,119,118,130,128,126,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,121,119,118,130,128,126,134,92,89
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,92,89,250,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,144,142,141,139,147,153,152,256,261
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,144,142,141,139,147,153,152,256,263
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,144,142,141,139,147,153,152,261,263
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,144,142,141,139,147,153,152,263,265
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,144,142,141,139,147,153,152,159,170
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,144,142,141,139,147,165,169,170,176
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,102,100,103,99,98,97,95,109,107,110,106,144,142,141,139,147,165,170,176,174
7,22,25,32,30,29,41,39,38,36,52,50,49,47,61,59,58,57,67,65,68,64,62,72,75,71,69,78,81,86,89,250,265
-----cfgNode-----
5,<global>
6,<empty>
7,jas_iccprof_t jas_iccprof_load (jas_stream_t *in)
8,jas_stream_t *in
9,<empty>
10,jas_iccprof_t* prof
11,int numtags
12,long curoff
13,long reloff
14,long prevoff
15,jas_iccsig_t type
16,jas_iccattrval_t* attrval
17,jas_iccattrval_t* prevattrval
18,jas_icctagtabent_t* tagtabent
19,jas_iccattrvalinfo_t* attrvalinfo
20,int i
21,int len
22,prof = 0
23,prof
24,0
25,attrval = 0
26,attrval
27,0
28,if (!(prof = jas_iccprof_create()))
29,!(prof = jas_iccprof_create())
30,prof = jas_iccprof_create()
31,prof
32,jas_iccprof_create()
33,<empty>
34,goto error;
35,if (jas_iccprof_readhdr(in, &prof->hdr))
36,jas_iccprof_readhdr(in, &prof->hdr)
37,in
38,&prof->hdr
39,prof->hdr
40,prof
41,hdr
42,<empty>
43,jas_eprintf("cannot get header\n")
44,"cannot get header\n"
45,goto error;
46,if (jas_iccprof_gettagtab(in, &prof->tagtab))
47,jas_iccprof_gettagtab(in, &prof->tagtab)
48,in
49,&prof->tagtab
50,prof->tagtab
51,prof
52,tagtab
53,<empty>
54,jas_eprintf("cannot get tab table\n")
55,"cannot get tab table\n"
56,goto error;
57,jas_iccprof_sorttagtab(&prof->tagtab)
58,&prof->tagtab
59,prof->tagtab
60,prof
61,tagtab
62,numtags = prof->tagtab.numents
63,numtags
64,prof->tagtab.numents
65,prof->tagtab
66,prof
67,tagtab
68,numents
69,curoff = JAS_ICC_HDRLEN + 4 + 12 * numtags
70,curoff
71,JAS_ICC_HDRLEN + 4 + 12 * numtags
72,JAS_ICC_HDRLEN + 4
73,JAS_ICC_HDRLEN
74,4
75,12 * numtags
76,12
77,numtags
78,prevoff = 0
79,prevoff
80,0
81,prevattrval = 0
82,prevattrval
83,0
84,for (i = 0;i < numtags;++i)
85,<empty>
86,i = 0
87,i
88,0
89,i < numtags
90,i
91,numtags
92,++i
93,i
94,<empty>
95,tagtabent = &prof->tagtab.ents[i]
96,tagtabent
97,&prof->tagtab.ents[i]
98,prof->tagtab.ents[i]
99,prof->tagtab.ents
100,prof->tagtab
101,prof
102,tagtab
103,ents
104,i
105,if (tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff))
106,tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff)
107,tagtabent->off
108,tagtabent
109,off
110,JAS_CAST(jas_iccuint32_t, prevoff)
111,jas_iccuint32_t
112,prevoff
113,<empty>
114,if (prevattrval)
115,prevattrval
116,<empty>
117,if (!(attrval = jas_iccattrval_clone(prevattrval)))
118,!(attrval = jas_iccattrval_clone(prevattrval))
119,attrval = jas_iccattrval_clone(prevattrval)
120,attrval
121,jas_iccattrval_clone(prevattrval)
122,prevattrval
123,<empty>
124,goto error;
125,if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))
126,jas_iccprof_setattr(prof, tagtabent->tag, attrval)
127,prof
128,tagtabent->tag
129,tagtabent
130,tag
131,attrval
132,<empty>
133,goto error;
134,jas_iccattrval_destroy(attrval)
135,attrval
136,else
137,<empty>
138,continue;
139,reloff = tagtabent->off - curoff
140,reloff
141,tagtabent->off - curoff
142,tagtabent->off
143,tagtabent
144,off
145,curoff
146,if (reloff > 0)
147,reloff > 0
148,reloff
149,0
150,<empty>
151,if (jas_stream_gobble(in, reloff) != reloff)
152,jas_stream_gobble(in, reloff) != reloff
153,jas_stream_gobble(in, reloff)
154,in
155,reloff
156,reloff
157,<empty>
158,goto error;
159,curoff += reloff
160,curoff
161,reloff
162,else
163,<empty>
164,if (reloff < 0)
165,reloff < 0
166,reloff
167,0
168,<empty>
169,abort()
170,prevoff = curoff
171,prevoff
172,curoff
173,if (jas_iccgetuint32(in, &type))
174,jas_iccgetuint32(in, &type)
175,in
176,&type
177,type
178,<empty>
179,goto error;
180,if (jas_stream_gobble(in, 4) != 4)
181,jas_stream_gobble(in, 4) != 4
182,jas_stream_gobble(in, 4)
183,in
184,4
185,4
186,<empty>
187,goto error;
188,curoff += 8
189,curoff
190,8
191,if (!(attrvalinfo = jas_iccattrvalinfo_lookup(type)))
192,!(attrvalinfo = jas_iccattrvalinfo_lookup(type))
193,attrvalinfo = jas_iccattrvalinfo_lookup(type)
194,attrvalinfo
195,jas_iccattrvalinfo_lookup(type)
196,type
197,<empty>
198,prevattrval = 0
199,prevattrval
200,0
201,continue;
202,if (!(attrval = jas_iccattrval_create(type)))
203,!(attrval = jas_iccattrval_create(type))
204,attrval = jas_iccattrval_create(type)
205,attrval
206,jas_iccattrval_create(type)
207,type
208,<empty>
209,goto error;
210,len = tagtabent->len - 8
211,len
212,tagtabent->len - 8
213,tagtabent->len
214,tagtabent
215,len
216,8
217,if ((*attrval->ops->input)(attrval, in, len))
218,(*attrval->ops->input)(attrval, in, len)
219,*attrval->ops->input
220,attrval->ops->input
221,attrval->ops
222,attrval
223,ops
224,input
225,attrval
226,in
227,len
228,<empty>
229,goto error;
230,curoff += len
231,curoff
232,len
233,if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))
234,jas_iccprof_setattr(prof, tagtabent->tag, attrval)
235,prof
236,tagtabent->tag
237,tagtabent
238,tag
239,attrval
240,<empty>
241,goto error;
242,prevattrval = attrval
243,prevattrval
244,attrval
245,jas_iccattrval_destroy(attrval)
246,attrval
247,attrval = 0
248,attrval
249,0
250,return prof;
251,prof
252,error:
253,	if (prof)
254,		jas_iccprof_destroy(prof);
255,if (prof)
256,prof
257,<empty>
258,jas_iccprof_destroy(prof)
259,prof
260,if (attrval)
261,attrval
262,<empty>
263,jas_iccattrval_destroy(attrval)
264,attrval
265,return 0;
266,0
267,RET
268,jas_stream_t *in
269,RET
270,jas_iccprof_t jas_iccprof_load (jas_stream_t *in)
271,jas_stream_t *in
272,<empty>
273,jas_iccprof_t* prof
274,int numtags
275,long curoff
276,long reloff
277,long prevoff
278,jas_iccsig_t type
279,jas_iccattrval_t* attrval
280,jas_iccattrval_t* prevattrval
281,jas_icctagtabent_t* tagtabent
282,jas_iccattrvalinfo_t* attrvalinfo
283,int i
284,int len
285,prof = 0
286,prof
287,0
288,attrval = 0
289,attrval
290,0
291,if (!(prof = jas_iccprof_create()))
292,!(prof = jas_iccprof_create())
293,prof = jas_iccprof_create()
294,prof
295,jas_iccprof_create()
296,<empty>
297,goto error;
298,if (jas_iccprof_readhdr(in, &prof->hdr))
299,jas_iccprof_readhdr(in, &prof->hdr)
300,in
301,&prof->hdr
302,prof->hdr
303,prof
304,hdr
305,<empty>
306,jas_eprintf("cannot get header\n")
307,"cannot get header\n"
308,goto error;
309,if (jas_iccprof_gettagtab(in, &prof->tagtab))
310,jas_iccprof_gettagtab(in, &prof->tagtab)
311,in
312,&prof->tagtab
313,prof->tagtab
314,prof
315,tagtab
316,<empty>
317,jas_eprintf("cannot get tab table\n")
318,"cannot get tab table\n"
319,goto error;
320,jas_iccprof_sorttagtab(&prof->tagtab)
321,&prof->tagtab
322,prof->tagtab
323,prof
324,tagtab
325,numtags = prof->tagtab.numents
326,numtags
327,prof->tagtab.numents
328,prof->tagtab
329,prof
330,tagtab
331,numents
332,curoff = JAS_ICC_HDRLEN + 4 + 12 * numtags
333,curoff
334,JAS_ICC_HDRLEN + 4 + 12 * numtags
335,JAS_ICC_HDRLEN + 4
336,JAS_ICC_HDRLEN
337,4
338,12 * numtags
339,12
340,numtags
341,prevoff = 0
342,prevoff
343,0
344,prevattrval = 0
345,prevattrval
346,0
347,for (i = 0;i < numtags;++i)
348,<empty>
349,i = 0
350,i
351,0
352,i < numtags
353,i
354,numtags
355,++i
356,i
357,<empty>
358,tagtabent = &prof->tagtab.ents[i]
359,tagtabent
360,&prof->tagtab.ents[i]
361,prof->tagtab.ents[i]
362,prof->tagtab.ents
363,prof->tagtab
364,prof
365,tagtab
366,ents
367,i
368,if (tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff))
369,tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff)
370,tagtabent->off
371,tagtabent
372,off
373,JAS_CAST(jas_iccuint32_t, prevoff)
374,jas_iccuint32_t
375,prevoff
376,<empty>
377,if (prevattrval)
378,prevattrval
379,<empty>
380,if (!(attrval = jas_iccattrval_clone(prevattrval)))
381,!(attrval = jas_iccattrval_clone(prevattrval))
382,attrval = jas_iccattrval_clone(prevattrval)
383,attrval
384,jas_iccattrval_clone(prevattrval)
385,prevattrval
386,<empty>
387,goto error;
388,if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))
389,jas_iccprof_setattr(prof, tagtabent->tag, attrval)
390,prof
391,tagtabent->tag
392,tagtabent
393,tag
394,attrval
395,<empty>
396,goto error;
397,jas_iccattrval_destroy(attrval)
398,attrval
399,else
400,<empty>
401,continue;
402,reloff = tagtabent->off - curoff
403,reloff
404,tagtabent->off - curoff
405,tagtabent->off
406,tagtabent
407,off
408,curoff
409,if (reloff > 0)
410,reloff > 0
411,reloff
412,0
413,<empty>
414,if (jas_stream_gobble(in, reloff) != reloff)
415,jas_stream_gobble(in, reloff) != reloff
416,jas_stream_gobble(in, reloff)
417,in
418,reloff
419,reloff
420,<empty>
421,goto error;
422,curoff += reloff
423,curoff
424,reloff
425,else
426,<empty>
427,if (reloff < 0)
428,reloff < 0
429,reloff
430,0
431,<empty>
432,abort()
433,prevoff = curoff
434,prevoff
435,curoff
436,if (jas_iccgetuint32(in, &type))
437,jas_iccgetuint32(in, &type)
438,in
439,&type
440,type
441,<empty>
442,goto error;
443,if (jas_stream_gobble(in, 4) != 4)
444,jas_stream_gobble(in, 4) != 4
445,jas_stream_gobble(in, 4)
446,in
447,4
448,4
449,<empty>
450,goto error;
451,curoff += 8
452,curoff
453,8
454,if (!(attrvalinfo = jas_iccattrvalinfo_lookup(type)))
455,!(attrvalinfo = jas_iccattrvalinfo_lookup(type))
456,attrvalinfo = jas_iccattrvalinfo_lookup(type)
457,attrvalinfo
458,jas_iccattrvalinfo_lookup(type)
459,type
460,<empty>
461,prevattrval = 0
462,prevattrval
463,0
464,continue;
465,if (!(attrval = jas_iccattrval_create(type)))
466,!(attrval = jas_iccattrval_create(type))
467,attrval = jas_iccattrval_create(type)
468,attrval
469,jas_iccattrval_create(type)
470,type
471,<empty>
472,goto error;
473,len = tagtabent->len - 8
474,len
475,tagtabent->len - 8
476,tagtabent->len
477,tagtabent
478,len
479,8
480,if ((*attrval->ops->input)(attrval, in, len))
481,(*attrval->ops->input)(attrval, in, len)
482,*attrval->ops->input
483,attrval->ops->input
484,attrval->ops
485,attrval
486,ops
487,input
488,attrval
489,in
490,len
491,<empty>
492,goto error;
493,curoff += len
494,curoff
495,len
496,if (jas_iccprof_setattr(prof, tagtabent->tag, attrval))
497,jas_iccprof_setattr(prof, tagtabent->tag, attrval)
498,prof
499,tagtabent->tag
500,tagtabent
501,tag
502,attrval
503,<empty>
504,goto error;
505,prevattrval = attrval
506,prevattrval
507,attrval
508,jas_iccattrval_destroy(attrval)
509,attrval
510,attrval = 0
511,attrval
512,0
513,return prof;
514,prof
515,error:
516,	if (prof)
517,		jas_iccprof_destroy(prof);
518,if (prof)
519,prof
520,<empty>
521,jas_iccprof_destroy(prof)
522,prof
523,if (attrval)
524,attrval
525,<empty>
526,jas_iccattrval_destroy(attrval)
527,attrval
528,return 0;
529,0
530,RET
531,jas_stream_t *in
=====================================
----------------dynamic----------------
=======testcase========
model_version:0x01000000
A-data-stat:0xa20000000000000010101010101002100100000000000000a48100000000000000000000101010100000000000000000101010101010101000100000000000001010101010101010c5490a6500000000101010101010101099c4096500000000101010101010101099c40965000000001010101010101010101010101010101010101010101010101010101010101010
A-data:0x503337230a0930230000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a230a31370c0c30303123000a0c000c23
=========trace=========
jas_iccprof_t *jas_iccprof_load(jas_stream_t *in) {
jas_iccprof_t *prof;
int numtags;
long curoff;
long reloff;
long prevoff;
jas_iccsig_t type;
jas_iccattrval_t *attrval;
jas_iccattrval_t *prevattrval;
jas_icctagtabent_t *tagtabent;
jas_iccattrvalinfo_t *attrvalinfo;
int i;
int len;
prof = 0;
attrval = 0;
jas_iccprof_sorttagtab(&prof->tagtab);
numtags = prof->tagtab.numents;
curoff = JAS_ICC_HDRLEN + 4 + 12 * numtags;
prevoff = 0;
prevattrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
if(reloff > 0)
curoff += reloff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
if(reloff > 0)
curoff += reloff;
prevoff = curoff;
curoff += 8;
if(!(attrvalinfo = jas_iccattrvalinfo_lookup(type)))
prevattrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
if(reloff > 0)
curoff += reloff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
prevoff = curoff;
curoff += 8;
if(!(attrvalinfo = jas_iccattrvalinfo_lookup(type)))
prevattrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
if(reloff > 0)
curoff += reloff;
prevoff = curoff;
curoff += 8;
if(!(attrvalinfo = jas_iccattrvalinfo_lookup(type)))
prevattrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
reloff = tagtabent->off - curoff;
if(reloff > 0)
curoff += reloff;
prevoff = curoff;
curoff += 8;
len = tagtabent->len - 8;
curoff += len;
prevattrval = attrval;
jas_iccattrval_destroy(attrval);
attrval = 0;
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
if(tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff))
if(prevattrval)
jas_iccattrval_destroy(attrval);
for(i = 0;i < numtags;++i)
tagtabent = &prof->tagtab.ents[i];
if(tagtabent->off == JAS_CAST(jas_iccuint32_t, prevoff))
if(prevattrval)
jas_iccattrval_destroy(attrval);
return prof;
=======================
